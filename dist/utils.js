!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("reader",[],e):"object"==typeof exports?exports.reader=e():t.reader=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";var r,o,i;n.r(e),n.d(e,"ViewType",(function(){return r})),n.d(e,"BindingType",(function(){return o})),n.d(e,"ImageStatus",(function(){return i})),function(t){t.SCROLL="scroll",t.PAGE1="page1",t.PAGE12="page12",t.PAGE23="page23"}(r||(r={})),function(t){t.LEFT="left",t.RIGHT="right"}(o||(o={})),function(t){t.NONE="none",t.LOADING="loading",t.ERROR="error",t.LOADED="loaded"}(i||(i={}))},,,,function(t,e,n){"use strict";n.r(e),n.d(e,"getRootElement",(function(){return u})),n.d(e,"getContentRootElement",(function(){return c})),n.d(e,"getContentContainerElement",(function(){return l})),n.d(e,"getScrollWidth",(function(){return f})),n.d(e,"getScrollHeight",(function(){return s})),n.d(e,"getScrollLeft",(function(){return h})),n.d(e,"getScrollTop",(function(){return d})),n.d(e,"setScrollLeft",(function(){return g})),n.d(e,"setScrollTop",(function(){return p})),n.d(e,"getClientWidth",(function(){return v})),n.d(e,"getClientHeight",(function(){return y})),n.d(e,"debounce",(function(){return m})),n.d(e,"throttle",(function(){return b})),n.d(e,"sleep",(function(){return _})),n.d(e,"hasIntersect",(function(){return w})),n.d(e,"logger",(function(){return O}));var r=n(8),o=n.n(r),i=n(9),a=n.n(i),u=function(){return document.scrollingElement?document.scrollingElement:document.documentElement||document.body},c=function(){return document.getElementById("content_root")},l=function(){return document.getElementById("content_container")},f=function(){var t=c();return t?t.scrollWidth:0},s=function(){var t=u();return t?t.scrollHeight:0},h=function(){var t=c();return t?t.scrollLeft:0},d=function(){var t=u();return t?t.scrollTop:0},g=function(t){var e=c();e&&(e.scrollLeft=t)},p=function(t){var e=u();e&&(e.scrollTop=t)},v=function(){return document.documentElement.clientWidth},y=function(){return document.documentElement.clientHeight},m=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r&&!e&&t.apply(null,i),e&&(clearTimeout(e),e=null),e=setTimeout((function(){e=null,t.apply(null,i)}),n)}},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r||(n?setTimeout((function(){return t.apply(null,i)}),e):t.apply(null,i),r=!0,setTimeout((function(){r=!1}),e))}},_=function(){var t=a()(o.a.mark((function t(){var e,n=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:0,t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(t,e){return t[0]<e[0]?t[1]>e[0]:e[1]>t[0]},O=console.log},function(t,e,n){"use strict";n.r(e),n.d(e,"isScroll",(function(){return i})),n.d(e,"isDoublePage",(function(){return a})),n.d(e,"columnsInPage",(function(){return u})),n.d(e,"columnWidth",(function(){return c})),n.d(e,"columnGap",(function(){return l})),n.d(e,"contentPadding",(function(){return f})),n.d(e,"containerWidth",(function(){return s})),n.d(e,"containerHeight",(function(){return h})),n.d(e,"allowedPageNumber",(function(){return d}));var r=n(4),o=n(0),i=function(t){return t.viewType===o.ViewType.SCROLL},a=function(t){var e=t.viewType;return e===o.ViewType.PAGE12||e===o.ViewType.PAGE23},u=function(t){var e=t.viewType;return e===o.ViewType.PAGE12||e===o.ViewType.PAGE23?2:1},c=function(t){var e=u(t);return(s(t)-l(t)*(e-1))/e},l=function(t){var e=t.columnGapInPercent,n=Math.ceil(Object(r.getClientWidth)()*(e/100));return n%2==1?n+1:n},f=function(t){var e=t.contentPaddingInPercent,n=Object(r.getClientWidth)();return Math.ceil(n*(e/100))},s=function(t){var e=Object(r.getClientWidth)()-2*t.containerHorizontalMargin,n=e-2*f(t);return n%2==1?n+1:n},h=function(t){var e=t.containerVerticalMargin;return Object(r.getClientHeight)()-2*e},d=function(t,e,n){var r=n,o=r%2==0,i=[1,e.totalPage];return a(t)&&o&&(r-=1),Math.max(Math.min(r,i[1]),i[0])}},function(t,e,n){"use strict";n.r(e),n.d(e,"isScroll",(function(){return i})),n.d(e,"isDoublePage",(function(){return a})),n.d(e,"columnsInPage",(function(){return u})),n.d(e,"contentWidth",(function(){return c})),n.d(e,"ratio",(function(){return l})),n.d(e,"containerWidth",(function(){return f})),n.d(e,"allowedPageNumber",(function(){return s})),n.d(e,"objectPosition",(function(){return h})),n.d(e,"startWithBlankPage",(function(){return d}));var r=n(4),o=n(0),i=function(t){return t.viewType===o.ViewType.SCROLL},a=function(t){var e=t.viewType;return e===o.ViewType.PAGE12||e===o.ViewType.PAGE23},u=function(t){var e=t.viewType;return e===o.ViewType.PAGE12||e===o.ViewType.PAGE23?2:1},c=function(t){var e=Object(r.getClientWidth)();return i(t)?Math.ceil(e*(t.contentWidthInPercent/100)):e/u(t)},l=function(t,e){return e&&t?e/t:1.4},f=function(t,e){var n=c(t),r=e.totalPage+(t.viewType===o.ViewType.PAGE23?1:0);return a(t)&&r%2==1&&(r+=1),n*r},s=function(t,e,n){var r=n,i=[t.viewType===o.ViewType.PAGE23?0:1,e.totalPage];if(a(t)){var u=t.viewType===o.ViewType.PAGE23,c=t.viewType===o.ViewType.PAGE12,l=r%2==0;l&&!u&&(r-=1),l||c||(r-=1)}return Math.max(Math.min(r,i[1]),i[0])},h=function(t,e){return i(t)||!a(t)?"50% 50%":t.bindingType===o.BindingType.LEFT&&t.viewType===o.ViewType.PAGE12||t.bindingType===o.BindingType.RIGHT&&t.viewType===o.ViewType.PAGE23?e%2==0?"right 50%":"left 50%":e%2==0?"left 50%":"right 50%"},d=function(t){return t.viewType===o.ViewType.PAGE23}},function(t,e,n){var r,o,i,a;if(t.exports=function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return o(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("./Logger"))&&r.__esModule?r:{default:r};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=void 0,this.height=void 0,this.gap=void 0,this.isDoublePageMode=!1,this.isScrollMode=!1,this.maxSelectionLength=1e3,this.systemMajorVersion=void 0,this.isSameDomAsUi=!1,this.shouldViewportInitialize=!1,this.shouldTwoPageAsOneWhenDoublePageMode=!1,this.onMessage=function(t){return o.default.info(t)}}return a(t,[{key:"pageGap",get:function(){return this.gap}},{key:"pageUnit",get:function(){return this.isScrollMode?this.pageHeightUnit:this.pageWidthUnit}},{key:"pageWidthUnit",get:function(){var t=this.shouldTwoPageAsOneWhenDoublePageMode&&this.isDoublePageMode?2:1;return(this.width+this.pageGap)*t}},{key:"pageHeightUnit",get:function(){return this.height}}]),a(t,[{key:"toObject",value:function(){return{width:this.width,height:this.height,gap:this.height,isDoublePageMode:this.isDoublePageMode,isScrollMode:this.isScrollMode,maxSelectionLength:this.maxSelectionLength,systemMajorVersion:this.systemMajorVersion,isSameDomAsUi:this.isSameDomAsUi,shouldViewportInitialize:this.shouldViewportInitialize,shouldTwoPageAsOneWhenDoublePageMode:this.shouldTwoPageAsOneWhenDoublePageMode,onMessage:this.onMessage}}}],[{key:"build",value:function(e){var n=new t;return e(n),Object.freeze(n),n}}]),t}();n.default=u},{"./Logger":2}],2:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"info",value:function(t){for(var e,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).log.apply(e,[t].concat(r))}},{key:"debug",value:function(t){}},{key:"error",value:function(t){for(var e,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).error.apply(e,[t].concat(r))}}])&&r(e,n),t}();n.default=o},{}],3:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={TOP:"top",BOTTOM:"bottom"},a=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:i.TOP;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodeIndex=e,this._wordIndex=n,this._type=r}return o(t,[{key:"nodeIndex",get:function(){return this._nodeIndex}},{key:"wordIndex",get:function(){return this._wordIndex}},{key:"type",get:function(){return this._type}}]),o(t,[{key:"toString",value:function(){return"".concat(this.nodeIndex).concat("#").concat(this.wordIndex)}}],[{key:"fromString",value:function(e,n){var r=e.split("#");return new t(parseInt(r[0],10),parseInt(r[1],10),n)}}]),t}();a.Type=i;var u=a;n.default=u},{}],4:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e?(this.left=e.left||e.x||0,this.top=e.top||e.y||0,this.right=e.right||this.left+(e.width||0),this.bottom=e.bottom||this.top+(e.height||0)):(this.left=0,this.top=0,this.right=0,this.bottom=0)}return o(t,[{key:"isZero",get:function(){return 0===this.left&&0===this.top&&0===this.right&&0===this.bottom}},{key:"isEmpty",get:function(){return this.left>=this.right||this.top>=this.bottom}},{key:"width",get:function(){return Math.max(this.right-this.left,0)}},{key:"height",get:function(){return Math.max(this.bottom-this.top,0)}},{key:"x",get:function(){return this.left},set:function(t){this.left=t}},{key:"minX",get:function(){return this.left}},{key:"midX",get:function(){return this.left+this.width/2}},{key:"maxX",get:function(){return this.left+this.width}},{key:"y",get:function(){return this.top},set:function(t){this.top=t}},{key:"minY",get:function(){return this.top}},{key:"midY",get:function(){return this.top+this.height/2}},{key:"maxY",get:function(){return this.top+this.height}},{key:"center",get:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}}}]),o(t,[{key:"equals",value:function(e){return e=new t(e),this.left===e.left&&this.top===e.top&&this.width===e.width&&this.height===e.height}},{key:"contains",value:function(e,n){if(this.isEmpty)return!1;if("number"!=typeof e){var r=new t(e);return!r.isEmpty&&this.left<=r.left&&this.top<=r.top&&this.right>=r.right&&this.bottom>=r.bottom}return this.left<=e&&e<=this.right&&this.top<=n&&n<=this.bottom}},{key:"inset",value:function(t,e,n,r){if(void 0===t)return this;if(void 0===e&&void 0===n&&void 0===r){var o=t;return this.inset(o,o,o,o)}if(void 0===n&&void 0===r){var i=t,a=e;return this.inset(i/2,a/2,i/2,a/2)}return this.left-=t,this.top+=e,this.right-=n,this.bottom+=r||0,this}},{key:"intersection",value:function(e){e=new t(e);var n=Math.max(this.left,e.left),r=Math.max(this.top,e.top),o=Math.min(this.right,e.right),i=Math.min(this.bottom,e.bottom);return n<o&&r<i?new t({left:n,top:r,right:o,bottom:i}):new t}},{key:"toAbsolute",value:function(){return null}},{key:"toJsonString",value:function(){return JSON.stringify(this.toObject())}},{key:"toObject",value:function(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom,width:this.width,height:this.height,x:this.x,y:this.y}}}]),t}();n.default=i},{}],5:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,t)})(t)}function u(t,e,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,l(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,a(Array)),n=e,(r=[{key:"contains",value:function(t,e){return"number"==typeof t&&void 0!==e?void 0!==this.find((function(n){return n.contains(t,e)})):void 0!==this.find((function(e){return e.contains(t)}))}},{key:"trim",value:function(){return this.filter((function(t){return 1<t.width}))}},{key:"toAbsolute",value:function(){return this.map((function(t){return t.toAbsolute()}))}},{key:"toJsonString",value:function(){return JSON.stringify(this.map((function(t){return t.toObject()})))}},{key:"toArray",value:function(){return this.map((function(t){return t.toObject()}))}}])&&o(n.prototype,r),e}();n.default=f},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("./Logger")),o=i(t("./Util"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"_createRegex",value:function(t,e,n,r){return new RegExp("".concat(t||"").concat(e||"").concat(n||""),r||"gm")}},{key:"getSplitWordRegex",value:function(){return o.default.getSplitWordRegex()}},{key:"getWhitespaceRegex",value:function(t,e,n){return this._createRegex(t,"[ \\u00A0]",e,n)}},{key:"getNewLineRegex",value:function(t,e,n){return this._createRegex(t,"[\\r\\n]",e,n)}},{key:"getWhitespaceAndNewLineRegex",value:function(t,e,n){return this._createRegex(t,"[\\t\\r\\n\\s\\u00A0]",e,n)}},{key:"getSentenceRegex",value:function(t,e,n){return this._createRegex(t,"[.。?!\"”'’」』〞〟]",e,n)}},{key:"isLastCharOfSentence",value:function(){return null!==(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").match(this.getSentenceRegex())}},{key:"isDigitOrLatin",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").charCodeAt(0);return this.isLatinCharCode(t)||this.isDigitCharCode(t)}},{key:"isPeriodPointOrName",value:function(t,e){if(void 0===t||void 0===e)return!1;var n=0,r=t.search(/[.](\s{0,})$/gm);return 0<r&&this.isDigitOrLatin(t[r-1])&&(n+=1),0<=(r=e.search(/[^\s]/gm))&&this.isDigitOrLatin(e[r])&&(n+=1),2===n}},{key:"getBrackets",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{return t.match(/[\(\)\{\}\[\]]/gm)||[]}catch(t){return[]}}},{key:"isOnePairBracket",value:function(){return null!==((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")).match(/\(\)|\{\}|\[\]/gm)}},{key:"mergeSentencesWithinBrackets",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=[],o=[];return e.forEach((function(e){var r=0<o.length;t.getBrackets(e).forEach((function(e){var n=o.pop();n?t.isOnePairBracket(n,e)||(o.push(n),o.push(e)):o.push(e)})),n.push((r?n.pop():"")+e)})),0<o.length&&(r.default.error("Brackets does not match."),r.default.error({sentences:e,brackets:o,resultSentences:n})),n}},{key:"_containCharCode",value:function(t,e){if(!isNaN(t))for(var n=0;n<e.length;n+=2)if(e[n]<=t&&t<=e[n+1])return!0;return!1}},{key:"isDigitCharCode",value:function(t){return this._containCharCode(t,[48,57])}},{key:"isSpaceCharCode",value:function(t){return 32===t||160===t}},{key:"isTildeCharCode",value:function(t){return 126===t||8764===t||12316===t}},{key:"isColonCharCode",value:function(t){return 58===t}},{key:"hangulCodeTable",value:function(){return[44032,55215]}},{key:"isHangulCharCode",value:function(t){return this._containCharCode(t,this.hangulCodeTable())}},{key:"latinCodeTable",value:function(){return[32,127,160,255,256,383,384,591]}},{key:"isLatinCharCode",value:function(t,e){if(isNaN(t))return!1;if(256<=t&&t<=383){if("u"===e){if(256<=t&&t<=311&&t%2==0||330<=t&&t<=375&&t%2==0||313<=t&&t<=328&&t%2==1||377<=t&&t<=382&&t%2==1)return!0;if(376===t)return!0}else if("l"===e){if(256<=t&&t<=311&&t%2==1||330<=t&&t<=375&&t%2==1||313<=t&&t<=328&&t%2==0||377<=t&&t<=382&&t%2==0)return!0;if(312===t||329===t||383===t)return!0}return!1}if(384<=t&&t<=591)return!0;var n,r=[65,90,192,214,216,222],o=[97,122,223,246,248,255];return n="u"===e?r:"l"===e?o:[].concat(r).concat(o),this._containCharCode(t,n)}},{key:"chineseCodeTable",value:function(){return[19968,40959,63744,64255,13056,13311,13312,19903,131072,173791,173824,177983,177984,178207,178208,183983,183984,191471,194560,195103]}},{key:"isChineseCharCode",value:function(t){return this._containCharCode(t,this.chineseCodeTable())}},{key:"japaneseCodeTable",value:function(){return[12288,12351,12352,12447,12448,12543,65280,65519,19968,40959]}},{key:"isJapaneseCharCode",value:function(t){return this._containCharCode(t,this.japaneseCodeTable())}},{key:"getContainCharRegex",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=function(t){return 65535<t?null:String.fromCharCode(t)},n="[";return t.forEach((function(t){for(var r=0;r<t.length;r+=2){var o=e(t[r]),i=e(t[r+1]);o&&i&&(n+="".concat(o,"-").concat(i))}})),n+="]",new RegExp("^".concat(n,"{1,}$"),"gm")}},{key:"getInitialCharCode",value:function(t){return 12544+[49,50,52,55,56,57,65,66,67,70,71,72,73,74,75,76,77,78][(t-44032-(t-44032)%28)/28/21]}},{key:"getMedialCharCodeIndex",value:function(t){return(t-44032-(t-44032)%28)/28%21}},{key:"getMedialCharCode",value:function(t){return 12544+[79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99][this.getMedialCharCodeIndex(t)]}},{key:"getFinalCharCode",value:function(t){var e=(t-44032)%28;return(0===e?0:12544)+[0,49,50,51,52,53,54,55,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,74,75,76,77,78][e]}},{key:"numericToNotationString",value:function(t){var e,n,r,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];o?(e=["","일","이","삼","사","오","육","칠","팔","구"],n=["","일","이","삼","사","오","육","칠","팔","구"],r=["십","일","이","삼","사","오","육","칠","팔","구"]):(e=["","one","two","three","four","five","six","seven","eight","nine"],n=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],r=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]);var i=function(t){if(t<10)return e[t];if(!o&&10<=t&&t<20)return r[t-10];if(o&&t<20)return"십".concat(e[t%10]);var i=o?"십":" ";return"".concat(n[Math.floor(t/10)]).concat(i).concat(e[t%10])},a=function(t){if(99<t){if(o&&t<200)return"백".concat(i(t%100));var n=o?"백":" hundred ";return"".concat(e[Math.floor(t/100)]).concat(n)+"".concat(i([t%100]))}return i(t)},u=function t(e){if(1e3<=e){if(o&&e<2e3)return"천".concat(a(e%1e3));var n=o?"천":" thousand ";return"".concat(t(Math.floor(e/1e3))).concat(n)+"".concat(a([e%1e3]))}return a(e)};return 0===t?o?"영":"zero":function t(e){var n=o?1e4:1e6;if(n<=e){if(o&&e<2*n)return"만".concat(u(e%n));var r=o?"만":" million ";return"".concat(t(Math.floor(e/n))).concat(r)+"".concat(u([e%n]))}return u(e)}(t).trim()}},{key:"numericToOrdinalString",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=["","한","두","세","네","다섯","여섯","일곱","여덟","아홉"],o=["","하나","둘","셋","넷","다섯","여섯","일곱","여덟","아홉"],i=["","열","스물","서른","마흔","쉰","예순","일흔","여든","아흔"],a=null!==n.match(/^(명|공|달|시|종|벌|채|갈|쾌|근|문|큰|살|째)(?!러)/gm);if(!a&&n.length)return null;var u,c=function(t){if(t<10)return r[t];var e=a?r[t%10]:o[t%10];return"".concat(i[Math.floor(t/10)]).concat(e)},l=function(t){return 99<t?t<200?"백".concat(c(t%100)):"".concat(e.numericToNotationString(Math.floor(t/100)),"백")+"".concat(c(t%100)):c(t)},f=function(t){return 1e3<=t?t<2e3?"천".concat(l(t%1e3)):"".concat(e.numericToNotationString(Math.floor(t/1e3)),"천")+"".concat(l(t%1e3)):l(t)};return 0===t?null:1e4<=(u=t)?u<2e4?"만".concat(f(u%1e4)):"".concat(e.numericToNotationString(Math.floor(u/1e4)),"만")+"".concat(f(u%1e4)):f(u)}}])&&a(e,n),t}();n.default=u},{"./Logger":2,"./Util":7}],7:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=NodeFilter,i=o.SHOW_TEXT,a=o.FILTER_ACCEPT,u=o.FILTER_SKIP,c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"createTextNodeIterator",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};return document.createNodeIterator(t,i,{acceptNode:function(t){return e(t)?a:u}},!0)}},{key:"createNodeIterator",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return document.createNodeIterator(t,e,{acceptNode:function(t){return n(t)?a:u}},r)}},{key:"getFootnoteRegex",value:function(){return/^(\[|\{|\(|주|)[0-9].*(\)|\}|\]|\.|)$/gm}},{key:"getSplitWordRegex",value:function(){return new RegExp(" |\\u00A0")}},{key:"getImageSize",value:function(e){var n=e.attributes,r=document.createAttribute("size");return r.value="0px",{dWidth:e.width,dHeight:e.height,nWidth:e.naturalWidth,nHeight:e.naturalHeight,sWidth:t.getMatchedCSSValue(e,"width"),sHeight:t.getMatchedCSSValue(e,"height"),aWidth:(n.width||r).value,aHeight:(n.height||r).value}}},{key:"getStylePropertyValue",value:function(t,e){var n=t;return t.nodeType&&(n=window.getComputedStyle(t)),parseFloat(n[e])||0}},{key:"getStylePropertyValues",value:function(t,e){var n=t;t.nodeType&&(n=window.getComputedStyle(t));for(var r=0,o=0;o<e.length;o+=1)r+=parseInt(n[e[o]],10)||0;return r}},{key:"_getMatchedCSSValue",value:function(t,e){var n=t.style.getPropertyValue(e);if(t.style.getPropertyPriority(e))return n;var r=window.getMatchedCSSRules(t);if(null===r)return n;for(var o=r.length-1;0<=o;o-=1){var i=r[o],a=i.style.getPropertyPriority(e);if((null===n||0===n.length||a)&&(n=i.style.getPropertyValue(e),a))break}return n}},{key:"getMatchedCSSValue",value:function(t,e){for(var n,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!(n=this._getMatchedCSSValue(t,e))&&null!==(t=t.parentElement)&&r;);return n}}])&&r(e,n),t}();n.default=c},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("./NodeLocation")),o=i(t("./Util"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var l,f=Node,s=f.TEXT_NODE,h=f.ELEMENT_NODE,d=f.DOCUMENT_POSITION_FOLLOWING,g=f.DOCUMENT_POSITION_CONTAINED_BY,p=NodeFilter,v=p.SHOW_TEXT,y=p.SHOW_ELEMENT,m=r.default.Type,b=(l=0,function(t){return"".concat(t).concat(++l)}),_=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ref=e,this._reader=n,this._sel=this._createSel(),this._speechHelper=this._createSpeechHelper(),this._nodes=null}return c(t,[{key:"ref",get:function(){return this._ref}},{key:"sel",get:function(){return this._sel}},{key:"speechHelper",get:function(){return this._speechHelper}},{key:"nodes",get:function(){return this._nodes=this._nodes||this._getNodes(),this._nodes}},{key:"images",get:function(){return Array.from(this.ref.getElementsByTagName("IMG"))}},{key:"_context",get:function(){return this._reader.context}}]),c(t,[{key:"_getNodes",value:function(){for(var t,e=o.default.createNodeIterator(this.ref,v|y,(function(t){return t.nodeType===s||t.nodeType===h&&"IMG"===t.nodeName})),n=[];t=e.nextNode();)n.push(t);return n}},{key:"_createSel",value:function(){return null}},{key:"_createSpeechHelper",value:function(){return null}},{key:"_generateId",value:function(t){var e=t.nodeName,n=Array.from(t.classList).find((function(t){return t.match(new RegExp("".concat(e,"*")))}))||b(e);return t.classList.remove(n),t.classList.add(n),n}},{key:"setHidden",value:function(t,e){var n;"string"==typeof e?(n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(document.getElementsByClassName(e),1)[0])||(n=document.getElementById(e)):n=e,n&&(n.style.visibility=t?"hidden":"")}},{key:"elementFromPoint",value:function(t,e,n){if(this._context.isSameDomAsUi){var r=function(n){return n.getClientRects().toRectList().contains(t,e)};if(n)return Array.from(this.ref.querySelectorAll(n)).find(r)||null;for(var i,a=o.default.createNodeIterator(this.ref,y),u=null;i=a.nextNode();)if(r(i))if(u){var c=u.compareDocumentPosition(i);(c&d||c&g)&&(u=i)}else u=i;return u}var l=document.elementFromPoint(t,e);if(n)for(;l&&l.nodeName.toLowerCase()!==n.toLowerCase();)l=l.parentElement;return l}},{key:"imageFromPoint",value:function(t,e){var n=this.elementFromPoint(t,e,"IMG");return n&&n.src?{id:this._generateId(n),element:n,src:n.src||"null",rect:n.getBoundingClientRect().toRect()}:null}},{key:"svgFromPoint",value:function(t,e){var n=this.elementFromPoint(t,e,"SVG");if(n){var r="<svg";n.attributes.forEach((function(t){r+=" ".concat(t.nodeName,'="').concat(t.nodeValue,'"')})),r+=">";for(var o=document.createElement("svgElement"),i=n.childNodes,a=0;a<i.length;a+=1)o.appendChild(i[a].cloneNode(!0));return{id:this._generateId(o),element:o,html:"".concat(r).concat(o.innerHTML,"</svg>"),rect:o.getBoundingClientRect().toRect()}}return null}},{key:"_getLinkFromNode",value:function(t){for(;t;){var e=t,n=e.nodeName,r=e.href,o=e.attributes;if(t&&"A"===n)return{node:t,href:r,type:(o["epub:type"]||{value:""}).value};t=t.parentNode}return null}},{key:"linkFromPoint",value:function(t,e){if(0===document.links.length)return null;for(var n=t,r=e,o=n-12;o<=n+12;o+=6)for(var i=r-12;i<=r+12;i+=6){var a=this.elementFromPoint(o,i);if(a){var u=this._getLinkFromNode(a);if(null!==u)return u}}return null}},{key:"_reviseImage",value:function(t,e,n){var r=function(t,e){var n,r=parseInt(t,10);if(!isNaN(r)){if(-1!==("string"==typeof(n=t)?n.search(/%/):-1)){if(100<r)return 1;if(r<100)return-1}if(e<r)return 1;if(r<e)return-1}return 0},i=function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return r<n?(t=r,e=n):(t=n,e=r),t/e*100},a=o.default.getImageSize(t),u="",c="";if(0===a.nWidth||0===a.nHeight)return{element:t,width:u,height:c,position:"",size:a};(0<r(a.sWidth,a.nWidth)||0<r(a.aWidth,a.nWidth))&&(u="initial"),(0<r(a.sHeight,a.nHeight)||0<r(a.aHeight,a.nHeight))&&(c="initial");var l=0;(a.nWidth>=a.nHeight!=a.dWidth>=a.dHeight||1<Math.abs(i(a.nWidth,a.nHeight)-i(a.dWidth,a.dHeight)))&&(a.dWidth>=a.dHeight&&a.dWidth<a.nWidth?(l=i(a.dWidth,a.nWidth)/100,a.dWidth<e&&Math.round(a.nHeight*l)<n?(u="".concat(a.dWidth,"px"),c="".concat(Math.round(a.nHeight*l),"px")):c=u="initial"):a.dWidth<a.dHeight&&a.dHeight<a.nHeight?(l=i(a.dHeight,a.nHeight)/100,Math.round(a.nWidth*l)<e&&a.dHeight<n?(u="".concat(Math.round(a.nWidth*l),"px"),c="".concat(a.dHeight,"px")):c=u="initial"):c=u="initial");var f=parseInt(u,10)||a.dWidth,s=parseInt(c,10)||a.dHeight;if(e<f||n<s){var h=(this._context.isScrollMode?0:t.offsetTop)+o.default.getStylePropertyValues(t,["line-height","margin-bottom","padding-bottom"]),d=Math.min(e,n)/2,g=Math.max(.95*(n-h),d),p=g/a.nHeight*a.nWidth;e<p&&(g*=e/p,p=e),u="".concat(p,"px"),c="".concat(g,"px")}return{element:t,width:u,height:c,position:"",size:a}}},{key:"_getOffsetDirectionFromElement",value:function(t){var e=this._context.isScrollMode?"top":"left";if(t){var n=o.default.getMatchedCSSValue(t,"position",!0);"left"===e&&"absolute"===n&&(e="top")}return e}},{key:"getPageFromRect",value:function(){return null}},{key:"_getElementById",value:function(t){return 1<this._reader.contents.length||t?this.ref.querySelector("#".concat(t)):document.getElementById(t)}},{key:"_getOffsetFromAnchor",value:function(t,e){var n=this._getElementById(t);if(n){var r=o.default.createTextNodeIterator(n).nextNode();if(r){var i=document.createRange();i.selectNodeContents(r);var a=window.getComputedStyle(n).display,u=i.getClientRects().toRectList().toAbsolute();if(u.length)return e(u[0],n);if("none"===a){n.style.display="block";var c=n.getBoundingClientRect().toRect().toAbsolute();return n.style.display="none",e(c,n)}}return e(n.getBoundingClientRect().toRect().toAbsolute(),n)}return e({left:null,top:null},null)}},{key:"getOffsetFromAnchor",value:function(t){var e=this;return this._getOffsetFromAnchor(t,(function(t,n){return e._context.isScrollMode?null===t.top?null:t.top:null===t.left?null:e.getPageFromRect(t,n)}))}},{key:"getOffsetFromSerializedRange",value:function(t){try{var e=Range.fromSerializedRange(t,this.ref).getClientRects().toRectList().toAbsolute();return 0<e.length?this._context.isScrollMode?e[0].top:this.getPageFromRect(e[0]):null}catch(t){return null}}},{key:"getRectListFromSerializedRange",value:function(t){return Range.fromSerializedRange(t,this.ref).getTextRectList().trim().toAbsolute()}},{key:"_findRectIndex",value:function(t,e,n){for(var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:m.TOP,o=this._context.isScrollMode?"top":"left",i=0;i<t.length;i+=1){var a=t[i];if(r===m.BOTTOM){if(n<=a[o]&&0<a.width)return i-1}else if(e<=a[o]&&a[o]<=n&&0<a.width)return i}return null}},{key:"_findNodeLocation",value:function(t,e){for(var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m.TOP,u=this.nodes,c=this._context.isScrollMode,l=null,f=function(f){var h=u[f],d=document.createRange();d.selectNodeContents(h);var g=d.getBoundingClientRect().toRect().toAbsolute();if(g.isEmpty){if("IMG"!==h.nodeName)return"continue";if(d.selectNode(h),(g=d.getBoundingClientRect().toRect().toAbsolute()).isEmpty)return"continue"}if((c?g.maxY:g.maxX)<t)return"continue";var p=void 0;if(h.nodeType===s){var v=h.nodeValue;if(!v)return"continue";for(var y=v.split(o.default.getSplitWordRegex()),m=d.startOffset,b=function(o){var a=y[o];if(a.trim().length){try{d.setStart(h,m),d.setEnd(h,m+a.length)}catch(t){return{v:{v:null}}}var u=d.getClientRects().toRectList().toAbsolute();if(null!==(p=n._findRectIndex(u,t,e,i)))return p<0?(n._reader.lastNodeLocationRect=l.rect,{v:{v:l.location.toString()}}):(n._reader.lastNodeLocationRect=u[p],{v:{v:new r.default(f,Math.min(o+p,y.length-1),i).toString()}});u.reverse().forEach((function(t){t[c?"bottom":"top"]<e&&(l={location:new r.default(f,o,i),rect:t})}))}m+=a.length+1},_=0;_<y.length;_+=1){var w=b(_);if("object"===a(w))return w.v}}else if("IMG"===h.nodeName){var O=d.getClientRects().toRectList().toAbsolute();if(null!==(p=n._findRectIndex(O,t,e,i)))return p<0?(n._reader.lastNodeLocationRect=l.rect,{v:l.location.toString()}):(n._reader.lastNodeLocationRect=O[p],{v:new r.default(f,0,i).toString()});O.reverse().forEach((function(t){t[c?"bottom":"top"]<e&&(l={location:new r.default(f,0,i),rect:t})}))}},h=0;h<u.length;h+=1){var d=f(h);switch(d){case"continue":continue;default:if("object"===a(d))return d.v}}return null}},{key:"getOffsetFromNodeLocation",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.TOP;if(null===t)return null;t instanceof r.default&&(t=t.toString());var n=r.default.fromString(t,e),i=n.nodeIndex,a=n.wordIndex;if(-1===i||-1===a)return null;var u=this.nodes[i];if(!u)return null;var c=document.createRange();c.selectNodeContents(u);var l=c.getBoundingClientRect().toRect().toAbsolute();if(l.isEmpty){if("IMG"!==u.nodeName)return null;if(c.selectNode(u),(l=c.getBoundingClientRect().toRect().toAbsolute()).isEmpty)return null}var f=this.getPageFromRect(l);if(null===f||this._reader.totalSize<=this._context.pageUnit*f)return null;if("IMG"===u.nodeName&&0===a)return this._context.isScrollMode?Math.max(l.top-(e===m.BOTTOM?this._context.pageUnit:0),0):f;var s=u.nodeValue;if(null===s)return null;for(var h,d=s.split(o.default.getSplitWordRegex()),g=0,p=0;p<=Math.min(a,d.length-1);p+=1)g+=(h=d[p]).length+1;try{c.setStart(c.startContainer,g-h.length-1),c.setEnd(c.startContainer,g-1)}catch(t){return null}var v=c.getBoundingClientRect().toRect();return l=v.toAbsolute(),null===(f=this.getPageFromRect(l))||this._reader.totalSize<=this._context.pageUnit*f?null:this._context.isScrollMode?Math.max(l.top-(e===m.BOTTOM?this._context.pageUnit:0),0):((v.left<0||(f+1)*this._context.pageUnit<l.maxX)&&(l.width<this._context.pageUnit?f+=1:f+=Math.floor(l.width/this._context.pageUnit)),f)}}]),t}();n.default=_},{"./NodeLocation":3,"./Util":7}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("../common/Util")),o=a(t("./Rect")),i=a(t("./RectList"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var s=Node,h=s.DOCUMENT_POSITION_PRECEDING,d=s.DOCUMENT_POSITION_FOLLOWING,g=s.DOCUMENT_POSITION_CONTAINED_BY,p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._injectMethod(),this._wrapper=document.documentElement,this.context=e,this.debugNodeLocation=!1,this.lastNodeLocationRect=null}return f(t,[{key:"contents",get:function(){return this._contents}},{key:"context",get:function(){return this._context},set:function(t){(this._context=t).shouldViewportInitialize&&this._setViewport()}},{key:"totalWidth",get:function(){return this._wrapper.scrollWidth}},{key:"totalHeight",get:function(){return this._wrapper.scrollHeight}},{key:"totalSize",get:function(){return this.context.isScrollMode?this.totalHeight:this.totalWidth}},{key:"pageXOffset",get:function(){return window.pageXOffset}},{key:"pageYOffset",get:function(){return window.pageYOffset}},{key:"pageOffset",get:function(){return this.context.isScrollMode?this.pageYOffset:this.pageXOffset}},{key:"curPage",get:function(){return this.pageOffset/this.context.pageUnit}}]),f(t,[{key:"setContent",value:function(t,e){this.setContents([t],e)}},{key:"setContents",value:function(t,e){var n=this;this.lastNodeLocationRect=null,this._hideNodeLocation(),this._wrapper=e||document.documentElement,this._contents=[],t.forEach((function(t){n._contents.push(n._createContent(t))}))}},{key:"_createContent",value:function(){return null}},{key:"getContent",value:function(t){return"number"==typeof t?this.contents[t]:this.contents.find((function(e){return e.ref===t}))}},{key:"_injectMethod",value:function(){var t=function(t,e,n){!(3<arguments.length&&void 0!==arguments[3]&&arguments[3])&&t[e]||(t[e]=n)};t(Range.prototype,"getTextRectList",(function(){var t=this.startContainer,e=this.startOffset,n=this.endContainer,o=this.endOffset,i=this.commonAncestorContainer;if(t===n){var a=t.innerText;return void 0!==a&&0===a.length?[]:this.getClientRects().toRectList()}var u=r.default.createTextNodeIterator(i),c=document.createRange();c.setStart(t,e),c.setEnd(t,t.length);for(var l,f=c.getClientRects().toRectList();l=u.nextNode();)if(t.compareDocumentPosition(l)!==h&&t!==l){if(n.compareDocumentPosition(l)===d||n===l)break;(c=document.createRange()).selectNodeContents(l),/^\s*$/.test(c.toString())||(f=f.concat(c.getClientRects().toRectList()))}return(c=document.createRange()).setStart(n,0),c.setEnd(n,o),/^\s*$/.test(c.toString())||(f=f.concat(c.getClientRects().toRectList())),f})),t(Range.prototype,"toSerializedRange",(function(t){return _.serializeRange(this,!0,t)})),t(Range,"fromSerializedRange",(function(t,e){var n=_.deserializeRange(t,e),r=document.createRange();return r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),n.detach(),r}));var e=[];try{e.push(DOMRect)}catch(t){}try{e.push(ClientRect)}catch(t){}e.forEach((function(e){e&&t(e.prototype,"toRect",(function(){return new o.default(this)}))}));var n=document.documentElement.getClientRects().constructor;t(n.prototype,"toRectList",(function(){return u(i.default,function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t=i.default.from(this,(function(t){return t.toRect()})))||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}());var t}));var a=this;t(o.default.prototype,"toAbsolute",(function(){var t=a.pageXOffset,e=a.pageYOffset;return a.context.isScrollMode?(this.top+=e,this.bottom+=e):(this.left+=t,this.right+=t),this}),!0)}},{key:"_setViewport",value:function(){var t="width=".concat(this.context.width,", height=").concat(this.context.height,",")+" initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0",e=document.querySelector("meta[name=viewport]");null===e&&((e=document.createElement("meta")).id="viewport",e.name="viewport",document.getElementsByTagName("head")[0].appendChild(e)),e.content=t}},{key:"_hideNodeLocation",value:function(){var t=document.getElementById("node-location-highlight");t&&t.setAttribute("style","display: none !important")}},{key:"_showNodeLocationIfDebug",value:function(){if(this.debugNodeLocation&&null!==this.lastNodeLocationRect){var t="node-location-highlight",e=document.getElementById(t);e||((e=document.createElement("span")).setAttribute("id",t),document.body.appendChild(e));var n=this.lastNodeLocationRect;n[this.context.isScrollMode?"top":"left"]-=this.pageOffset,n[this.context.isScrollMode?"bottom":"right"]-=this.pageOffset,e.style.cssText="position: absolute !important;background-color: red !important;"+"left: ".concat(n.left,"px !important;")+"top: ".concat(n.top,"px !important;")+"width: ".concat(n.width||3,"px !important;")+"height: ".concat(n.height,"px !important;")+"display: block !important;opacity: 0.4 !important;z-index: 99 !important;"}}},{key:"scrollTo",value:function(t){this.context.isScrollMode?window.scroll(0,t):window.scroll(t,0)}},{key:"searchText",value:function(t){if(window.find(t,!1)){var e=getSelection().getRangeAt(0);if(0<e.toString().length){var n=e.startContainer,r=this.contents.find((function(t){return t.ref.compareDocumentPosition(n)&g})).ref;if(r)return e.toSerializedRange(r)}}return null}},{key:"resetSearch",value:function(){getSelection().removeAllRanges()}},{key:"getSurroundingTextForSearchResult",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=getSelection().getRangeAt(0),r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset,u=o,c=Math.max(o-t,0),l=a,f=Math.min(c+e,i.length);n.setStart(r,c),n.setEnd(i,f);var s=n.toString();return n.setStart(r,u),n.setEnd(i,l),s}},{key:"getRectListFromSearchResult",value:function(){return getSelection().getRangeAt(0).getClientRects().toRectList().toAbsolute()}},{key:"getPageFromSearchResult",value:function(){var t=getSelection().getRangeAt(0);return this.contents.find((function(e){return e.ref.compareDocumentPosition(t.startContainer)&g})).getPageFromRect(this.getRectListFromSearchResult()[0])}}]),t}();n.default=p},{"../common/Util":7,"./Rect":4,"./RectList":5}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("./SpeechUtil")),o=i(t("../common/Util"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var c=Node,l=c.DOCUMENT_POSITION_FOLLOWING,f=c.DOCUMENT_POSITION_PRECEDING,s=c.TEXT_NODE,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reader=e._reader,this._content=e,this._maxLength=e._context.maxSelectionLength,this._init()}return u(t,[{key:"isExpandContinuableIntoNextPage",get:function(){return this._isExpandContinuableIntoNextPage(this.getRange())}},{key:"_context",get:function(){return this._reader.context}}]),u(t,[{key:"_init",value:function(){this._startContainer=null,this._startOffset=null,this._endContainer=null,this._endOffset=null,this._isOverflowed=!1,this._continueContainer=null,this._continueOffset=null,this._caretIterator=null}},{key:"start",value:function(t,e,n){var r=this._getCaretRange(t,e,n);return null!==r&&(this._expandRangeByWord(r),this._startContainer=r.startContainer,this._startOffset=r.startOffset,this._endContainer=r.endContainer,this._endOffset=r.endOffset,!0)}},{key:"expandIntoUpper",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"character",r=this._getCaretRange(t,e,n,!0);if(null===r)return!1;var o=this._endContainer.compareDocumentPosition(r.startContainer);if(o===l||0===o&&this._endOffset<r.startOffset)return!1;if(r.startContainer===this._startContainer&&r.startOffset===this._startOffset)return!1;r.startContainer.childNodes.length&&r.setStart(r.startContainer.childNodes[r.startOffset],0),r.endContainer.childNodes.length&&r.setEnd(r.endContainer.childNodes[r.endOffset],r.endContainer.childNodes[r.endOffset].textContent.length);var i=document.createRange();return i.setStart(r.startContainer,r.startOffset),i.setEnd(this._endContainer,this._endOffset),!i.collapsed&&!!this._isValid(i)&&(this._startContainer=r.startContainer,this._startOffset=r.startOffset,!0)}},{key:"expandIntoLower",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"character",r=this._getCaretRange(t,e,n,!0);if(null===r)return!1;var o=this._startContainer.compareDocumentPosition(r.endContainer);if(o===f||0===o&&this._startOffset>r.endOffset)return!1;if(r.endContainer===this._endContainer&&r.endOffset===this._endOffset)return!1;if(r.startContainer.childNodes.length&&r.setStart(r.startContainer.childNodes[r.startOffset],0),r.endContainer.childNodes.length&&r.setEnd(r.endContainer.childNodes[r.endOffset],r.endContainer.childNodes[r.endOffset].textContent.length),this._isOutOfBounds(r))return!1;var i=document.createRange();return i.setStart(this._startContainer,this._startOffset),i.setEnd(r.endContainer,r.endOffset),!i.collapsed&&!!this._isValid(i)&&(this._endContainer=r.endContainer,this._endOffset=r.endOffset,!0)}},{key:"expandIntoNextPage",value:function(){return!!this.isExpandContinuableIntoNextPage&&(this._endContainer=this._continueContainer,this._endOffset=this._continueOffset,!0)}},{key:"end",value:function(){this._init()}},{key:"_getUpperBound",value:function(){return 0}},{key:"_isExpandContinuableIntoNextPage",value:function(t){if(!this._context.isScrollMode){var e=this._getUpperBound(),n=t.cloneRange(),r=n.endContainer,o=n.endOffset;do{for(var i=r.textContent.length;o<i;){if(n.setStart(r,o),n.setEnd(r,o+1),!/\s/.test(n.toString()))return!(this._clientLeftOfRangeForCheckingNextPageContinuable(n)<e||(this._expandRangeBySentence(n,2*e),this._continueContainer=n.endContainer,this._continueOffset=n.endOffset,0));o+=1}o=0}while(r=this._getNextTextNode(n))}return!1}},{key:"_expandRangeByWord",value:function(t){var e,n,o=[r.default.chineseCodeTable(),r.default.japaneseCodeTable()];if(r.default.getContainCharRegex(o).test(t.toString()))t.expand("character");else{for(var i=t.startContainer,a=t.startOffset;0<=a;){var u=i.textContent,c=i.previousSibling||i.parentNode.previousSibling;if(/^\s/.test(t.toString())){t.setStart(i,Math.min(a+1,u.length));break}if((a-=1)<0){if(null===c)break;a=(i=0<i.childNodes.length?i.childNodes[i.childNodes.length-1]:c).textContent.length}t.setStart(i,a)}var l=t.endContainer;for(a=t.endOffset;a<=l.textContent.length;){var f=l.textContent,s=l.nextSibling||l.parentNode.nextSibling;if(/\s$/.test(t.toString())){t.setEnd(l,a);break}if((a+=1)>f.length){if(null===s)break;a=0,(l=s).childNodes.length&&(l=(e=l.childNodes,n=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}())[0])}t.setEnd(l,a)}}}},{key:"_expandRangeBySentence",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=t.endOffset;if(t.expand("sentence"),!(e<0))for(var r=t.endOffset;n<r&&!(t.getBoundingClientRect().toRect().right<=e);)t.setEnd(t.endContainer,r-=1)}},{key:"_getNextTextNode",value:function(t){var e=t.endContainer.nextSibling;return e?e.nodeType===s?e:o.default.createTextNodeIterator(e).nextNode()||(t.setEnd(e,0),this._getNextTextNode(t)):(t.setEndAfter(t.endContainer),"BODY"===t.endContainer.nodeName?null:this._getNextTextNode(t))}},{key:"_isValid",value:function(t){return t.toString().length>this._maxLength?(this._isOverflowed||this._context.onMessage("최대 ".concat(this._maxLength,"자까지 선택할 수 있습니다.")),this._isOverflowed=!0):this._isOverflowed=!1,!this._isOverflowed}},{key:"_caretRangeFromPoint",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"word";if(this._context.isSameDomAsUi){var r;for(this._caretIterator?this._caretIterator.previousNode():this._caretIterator=o.default.createTextNodeIterator(this._content.ref,(function(n){var r=document.createRange();return r.selectNode(n),!r.getBoundingClientRect().toRect().isEmpty&&n.parentElement.getBoundingClientRect().toRect().contains(t,e)}));r=this._caretIterator.nextNode();){var i=document.createRange();i.selectNodeContents(r);for(var a=o.default.getStylePropertyValue(r.parentElement,"fontSize"),u=o.default.getStylePropertyValue(r.parentElement,"lineHeight"),c=i.toString().length,l=0;l<c;l++){i.setStart(i.startContainer,l),i.setEnd(i.endContainer,Math.min(l+1,c));var f=i.getClientRects().toRectList();if(0!==f.length){var s=f[f.length-1].inset(0,0,0,Math.max(u-a,0));if(s.contains(t,e))return i.expand(n),i;if(l===c-1&&s.minY<e&&e<s.maxY){var h=this._caretIterator.nextNode();if(this._caretIterator.previousNode(),!h)return i.expand(n),i;var d=document.createRange();if(d.selectNodeContents(r),s.maxY<d.getBoundingClientRect().toRect().minY)return i.expand(n),i}}}}return this._caretIterator=null}return document.caretRangeFromPoint(t,e)}},{key:"_getCaretRange",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"word",r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=this._caretRangeFromPoint(t,e,this._content.ref,n);return null===o?null:(o.expand(n),!r&&o.collapsed?null:o)}},{key:"_isOutOfBounds",value:function(){return!1}},{key:"getRange",value:function(){var t=document.createRange();return t.setStart(this._startContainer,this._startOffset),t.setEnd(this._endContainer,this._endOffset),t}},{key:"getSerializedRange",value:function(){return this.getRange().toSerializedRange(this._content.ref)}},{key:"getRectList",value:function(){return this.getRange().getTextRectList().trim().toAbsolute()}},{key:"getText",value:function(){return this.getRange().toString()}}]),t}();n.default=h},{"../common/Util":7,"./SpeechUtil":6}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=u(t("../common/_Content")),o=u(t("../common/NodeLocation")),i=u(t("./Sel")),a=u(t("../common/Util"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=o.default.Type,g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,s(e).apply(this,arguments))}var n,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,r.default),n=e,(u=[{key:"_createSel",value:function(){return new i.default(this)}},{key:"reviseImages",value:function(t){var e=this,n=this._context,r=n.width,o=n.height,i=[],a=this.images,u=function(){if(a.length===i.length){var n=[];i.forEach((function(t){var i=e._reviseImage(t,r,o),a=i.width,u=i.height,c=i.position;(a.length||u.length||c.length)&&n.push({element:t,width:a,height:u,position:c})})),n.forEach((function(t){var e=t.element,n=t.width,r=t.height,o=t.position;n.length&&(e.style.width=n),r.length&&(e.style.height=r),o.length&&(e.style.position=o)})),t&&setTimeout((function(){t()}),0)}};a.forEach((function(t){t.complete?i.push(t):(t.addEventListener("load",(function(){i.push(t),u()})),t.addEventListener("error",(function(){i.push(null),u()})))})),u()}},{key:"getPageFromRect",value:function(t){return null===t?null:this._context.isScrollMode?Math.floor(t.top/this._context.pageHeightUnit)+1:Math.floor(t.left/this._context.pageWidthUnit)+1}},{key:"getPageFromAnchor",value:function(t){var e=this;return this._getOffsetFromAnchor(t,(function(t,n){return null===t.left||null===t.top?null:e.getPageFromRect(t,n)}))}},{key:"getPageFromSerializedRange",value:function(t){var e=this.getOffsetFromSerializedRange(t),n=this._context,r=n.isScrollMode,o=n.pageHeightUnit;return r&&null!==e?Math.floor(e/o)+1:e}},{key:"getPageFromNodeLocation",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.TOP,n=this.getOffsetFromNodeLocation(t,e),r=this._context,o=r.isScrollMode,i=r.pageHeightUnit;return o&&null!==n?Math.floor(n/i)+1:n}},{key:"getCurrentNodeLocation",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:d.TOP,e=(a.default.getStylePropertyValue(document.documentElement,"width")-a.default.getStylePropertyValue(this._ref,"width"))/2,n=this._context,r=n.isScrollMode,i=n.pageUnit,u=this._reader.pageOffset+(r?0:e),c=u+i,l=new o.default(-1,-1,t).toString(),f=this._findNodeLocation(u,c,t);return this._reader._showNodeLocationIfDebug(),f||l}}])&&l(n.prototype,u),e}();n.default=g},{"../common/NodeLocation":3,"../common/Util":7,"../common/_Content":8,"./Sel":13}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("../common/_Reader")),o=i(t("./Content"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,f(e).apply(this,arguments))}var n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r.default),n=e,(i=[{key:"_createContent",value:function(t){return new o.default(t,this)}},{key:"searchText",value:function(t){var n=l(f(e.prototype),"searchText",this).call(this,t);return n?{serializedRange:n,rectList:this.getRectListFromSearchResult(),text:this.getSurroundingTextForSearchResult(),page:this.getPageFromSearchResult()}:null}},{key:"pageXOffset",get:function(){return this._wrapper.parentElement.scrollLeft}},{key:"curPage",get:function(){return l(f(e.prototype),"curPage",this)+1}}])&&u(n.prototype,i),e}();n.default=h},{"../common/_Reader":9,"./Content":11}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("../common/_Sel"))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o.default),e}();n.default=l},{"../common/_Sel":10}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Context",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"NodeLocation",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"Reader",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"Rect",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"RectList",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return c.default}}),n.default=void 0;var r=l(t("../common/Context")),o=l(t("../common/NodeLocation")),i=l(t("./Reader")),a=l(t("../common/Rect")),u=l(t("../common/RectList")),c=l(t("../common/Util"));function l(t){return t&&t.__esModule?t:{default:t}}var f={Context:r.default,NodeLocation:o.default,Reader:i.default,Rect:a.default,RectList:u.default,Util:c.default};n.default=f},{"../common/Context":1,"../common/NodeLocation":3,"../common/Rect":4,"../common/RectList":5,"../common/Util":7,"./Reader":12}]},{},[14])(14),"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=e[o];if(t.call(r,i,o,e))return i;o++}},configurable:!0,writable:!0}),Array.from||(Array.from=(r=Object.prototype.toString,o=function(t){return"function"==typeof t||"[object Function]"===r.call(t)},i=Math.pow(2,53)-1,a=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),i)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=1<arguments.length?arguments[1]:void 0;if(void 0!==r){if(!o(r))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var i,u=a(e.length),c=o(this)?Object(new this(u)):new Array(u),l=0;l<u;)i=e[l],c[l]=r?void 0===n?r(i,l):r.call(n,i,l):i,l+=1;return c.length=u,c})),"function"!=typeof window.getMatchedCSSRules){var u=/[\w-]+/g,c=/#[\w-]+/g,l=/\.[\w-]+/g,f=/\[[^\]]+\]/g,s=/\:(?!not)[\w-]+(\(.*\))?/g,h=/\:\:?(after|before|first-letter|first-line|selection)/g;function d(t){return[].slice.call(t||[])}function g(t){var e=t.media&&t.media.mediaText;return t.disabled||e&&e.length&&!window.matchMedia(e).matches?[]:d(t.cssRules)}function p(t,e){return t.match(e),e?e.length:0}function v(t){for(var e,n,r=[0,0,0],o=t.split(" ");"string"==typeof(e=o.shift());)n=p(e,h),(r[2]=n)&&(e=e.replace(h,"")),n=p(e,s),(r[1]=n)&&(e=e.replace(s,"")),n=p(e,f),r[1]+=n,n&&(e=e.replace(f,"")),n=p(e,c),(r[0]=n)&&(e=e.replace(c,"")),n=p(e,l),r[1]+=n,n&&(e=e.replace(l,"")),r[2]+=p(e,u);return parseInt(r.join(""),10)}function y(t,e){for(var n,r,o=e.split(","),i=0;n=o.shift();)t.webkitMatchesSelector(n)&&(i=i<(r=v(n))?r:i);return i}window.getMatchedCSSRules=function(t){var e,n,r,o,i=[];for(e=d(window.document.styleSheets);n=e.shift();)for(r=g(n);o=r.shift();)o.styleSheet?r=g(o.styleSheet).concat(r):o.media?r=g(o).concat(r):o.selectorText&&0!==o.selectorText.length&&t.webkitMatchesSelector(o.selectorText)&&i.push(o);return function(t,e){return e.sort((function(e,n){return y(t,n.selectorText)-y(t,e.selectorText)}))}(t,i)}}var m,b=(m=null,function(t){for(var e=function(t){for(var e,n=[],r=0,o=t.length;r<o;++r)(e=t.charCodeAt(r))<128?n.push(e):e<2048?n.push(e>>6|192,63&e|128):n.push(e>>12|224,e>>6&63|128,63&e|128);return n}(t),n=-1,r=(m||(m=function(){for(var t,e,n=[],r=0;r<256;++r){for(e=r,t=8;t--;)1==(1&e)?e=e>>>1^3988292384:e>>>=1;n[r]=e>>>0}return n}()),m),o=0,i=e.length;o<i;++o)n=n>>>8^r[255&(n^e[o])];return(-1^n)>>>0}),_={nodeToInfoString:function(t,e){var n=function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")};e=e||[];var r=t.nodeType,o=t.childNodes,i=o.length,a=[r,t.nodeName,i].join(":"),u="",c="";switch(r){case 3:u=n(t.nodeValue);break;case 8:u="\x3c!--"+n(t.nodeValue)+"--\x3e";break;default:u="<"+a+">",c="</>"}u&&e.push(u);for(var l=0;l<i;++l)_.nodeToInfoString(o[l],e);return c&&e.push(c),e},getElementChecksum:function(t){var e=_.nodeToInfoString(t).join("");return b(e).toString(16)},getDocument:function(t){if(9==t.nodeType)return t;if(void 0!==t.ownerDocument)return t.ownerDocument;if(void 0!==t.document)return t.document;if(t.parentNode)return _.getDocument(t.parentNode);throw new Error("Error in Rangy: getDocument: no document found for node")},getNodeIndex:function(t){for(var e=0;t=t.previousSibling;)++e;return e},getNodeLength:function(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}},serializePosition:function(t,e,n){var r=[],o=t;for(n=n||_.getDocument(t).documentElement;o&&o!=n;)r.push(_.getNodeIndex(o,!0)),o=o.parentNode;return r.join("/")+":"+e},serializeRange:function(t,e,n){if(!function(t,e,n){for(var r=e;r;){if(r===t)return!0;r=r.parentNode}return!1}(n=n||_.getDocument(t).startContainer,t.commonAncestorContainer))throw new Error("Error in Rangy: serializeRange(): range is not wholly contained within specified root node.");var r=_.serializePosition(t.startContainer,t.startOffset,n)+","+_.serializePosition(t.endContainer,t.endOffset,n);return e||(r+="{"+_.getElementChecksum(n)+"}"),r},deserializePosition:function(t,e,n){e||(e=(n||document).documentElement);for(var r,o=t.split(":"),i=e,a=o[0]?o[0].split("/"):[],u=a.length;u--;){if(!((r=parseInt(a[u],10))<i.childNodes.length))throw new Error("Error in Rangy: deserializePosition() failed: node has no child with index "+r+", "+u+".");i=i.childNodes[r]}return{node:i,offset:parseInt(o[1],10)}},deserializeRegex:/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/,deserializeRange:function(t,e,n){e?n=n||_.getDocument(e):e=(n=n||document).documentElement;var r,o=_.deserializeRegex.exec(t),i=o[4];if(i&&i!==(r=_.getElementChecksum(e)))throw new Error("deserializeRange: checksums of serialized range root node ("+i+") and target root node ("+r+") do not match");var a=_.deserializePosition(o[1],e,n),u=_.deserializePosition(o[2],e,n),c=document.createRange();return c.setStart(a.node,a.offset),c.setEnd(u.node,u.offset),c},canDeserializeRange:function(t,e,n){e||(e=(n||document).documentElement);var r=_.deserializeRegex.exec(t)[3];return!r||r===_.getElementChecksum(e)}}},function(t,e,n){t.exports=n(12)},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)}))}}},,function(t,e,n){"use strict";n.r(e),n.d(e,"SettingUtil",(function(){return u}));var r=n(7);n.d(e,"Context",(function(){return r.Context})),n.d(e,"Rect",(function(){return r.Rect})),n.d(e,"RectList",(function(){return r.RectList}));var o=n(6);n.d(e,"ComicSettingUtil",(function(){return o}));var i=n(5);n.d(e,"EpubSettingUtil",(function(){return i}));var a=n(4);n.d(e,"Util",(function(){return a}));var u=i},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=_(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function d(){}var g={};g[o]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(S([])));v&&v!==e&&n.call(v,o)&&(g=v);var y=d.prototype=s.prototype=Object.create(g);function m(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==typeof s&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=y.constructor=d,d.constructor=h,h.displayName=u(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(y),u(y,a,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}])}));